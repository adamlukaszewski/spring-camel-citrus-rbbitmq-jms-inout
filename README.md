# spring-camel-citrus-rabbitmq-jms-inout

This sample repo shall help to investigate the reported
citrus [issue 1208](https://github.com/citrusframework/citrus/issues/1208)

## Application Context

This sample defines an easy logic (apache camel route) which consumes message coming from the `foo.queue` (delegated by
the exchange `foo`), making some logs and returns back a json formated message back to the caller (in-out exchange
pattern). A message like this will be generated by the application:

```json
{
  "response": "Processed message with ID null and body: dfssdf"
}
```

With citrix I wanted to write some tests which are testing the behavior of my logic (integration tests). Even though the
calling logic could be successfully invoked citrus was not able with the created temporary queue consumer (in-out) to
read the message correctly (invalid stream header: 7B227575).

## Setup

Start rabbit in docker with management ui and needed exchanges and queues just in the root of the project:

```bash
make app-start-local-infrastructure 
```

